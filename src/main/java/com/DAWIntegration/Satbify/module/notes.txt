
  add features:
  - add a keySwitch to use average pitch only while average pitch is present under the chord. Yields random result.
-same сделать keySwitches inversion, chordType,  чтобы включать и выключать участие этих аккордов и/или non latching.
- get scale and tonality change events from Reaper directly.
- limit active area in time selection if set, or all the timeline if not. Reaper script only.
- Скрытые октавы
- Переченье
- Пройтись по всей книге и найти все оценки качества соединений (желательные, нежелательные, возможные)
- Параллельные октавы возможны при разрешении D7 стр 95.
- в секвенциях функциональная связь продолжает действовать только внутри звена, на грани же между звеньями она как бы отсутствует.
    значит, в целом тональные тяготеня должны работать внутри тональности!!! Это Важно!
- nрименяются обычно полными и разрешаются в тоннку
- delete Alteration from repository constructor, solve this problem in the applyScale() method.
- квинта в доминант нонакконде присутсвет только в перемещении, когда перед ним тот же нонаккорд без квинты.
    Как это реализовать???? нонаккорды без этогой фичи должны быть без квинты... потом добавлю фичу и квинту вместе.
- Ограничить сверху и снизу входящие ноты со всех партий для гаромнизации. Чтобы ингорировать случайные слишком высокие и низкие.
form keyswitch" предложение, период...






! ! ! ! ! ! выбирать аккорды функциями а не ступенями:
‌скрытые октавы
‌из выбранной последовательности функций выбирать "сложность"решения с помощью velocity.
‌сложность выбранной последовательности начинается с элементарных, потом -> альтерации ДД, заканчивается заимстваваниями из других тональностей.






!!!!! all secondary KS work without repeating.
+ legato chords should be without pauses if legato is on.
+ key 24 should preserve notes only above it, meaning only notes start. lua.
-- problem: chords with harmonized voice is difficult to connect smoothly with normal chords.
+ make an option to ignore notes on voices tracks. create and process a keyswitch to ignore notes from voices tracks in the script (not backend).
-- make a list of test-cases
-- todo: keyswitchses for parallels
-- todo: when legato, make last notes length original.
-- todo: add voice range limitation separate for each voice.
+ if array length is 1 - return one random chord.
-- todo: Handle exceptions and send the message to reaper.
-- three voices
-- add option for one chord track instead of four.
-- add more scales.
